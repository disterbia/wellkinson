CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    is_admin BOOLEAN NOT NULL DEFAULT false,
    birthday VARCHAR(40) NOT NULL,
    device_id VARCHAR(40)  NOT NULL ,
    gender BOOLEAN NOT NULL,
    fcm_token VARCHAR(255) NOT NULL,
    is_first BOOLEAN NOT NULL DEFAULT true ,
    name VARCHAR(40) NOT NULL,
    phone_num VARCHAR(40) NOT NULL,
    use_auto_login BOOLEAN NOT NULL DEFAULT false,
    use_privacy_protection BOOLEAN NOT NULL DEFAULT false,
    use_sleep_tracking BOOLEAN NOT NULL DEFAULT false,
    user_type VARCHAR(40) NOT NULL,
    email VARCHAR(40) NOT NULL,
    created DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
)
 engine=InnoDB default charset utf8;

CREATE TABLE alarms (
    id INT AUTO_INCREMENT PRIMARY KEY,
    uid INT NOT NULL,
    type VARCHAR(255) NOT NULL,
    body TEXT NOT NULL,
	start_at VARCHAR(255) NOT NULL,
    end_at VARCHAR(255) NOT NULL,
    timestamp VARCHAR(255) NOT NULL,
    week VARCHAR(255) NOT NULL ,
	created DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (uid) REFERENCES users(id) ON DELETE CASCADE
)engine=InnoDB default charset utf8;


CREATE TABLE notifications (
    id INT AUTO_INCREMENT PRIMARY KEY,
    uid INT NOT NULL,
    type VARCHAR(40)  NOT NULL,
    body TEXT  NOT NULL,
    is_read BOOLEAN NOT NULL DEFAULT false,
	created DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (uid) REFERENCES users(id) ON DELETE CASCADE
)engine=InnoDB default charset utf8;

CREATE TABLE inquires(
id INT AUTO_INCREMENT PRIMARY KEY,
uid INT NOT NULL,
email VARCHAR(40) NOT NULL,
title VARCHAR(40)NOT NULL,
level TINYINT NOT NULL DEFAULT 0,
content TEXT NOT NULL,
created DATETIME DEFAULT CURRENT_TIMESTAMP,
updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
FOREIGN KEY (uid) REFERENCES users(id) ON DELETE CASCADE
)engine=InnoDB default charset utf8;

CREATE TABLE inquire_replies(
id INT AUTO_INCREMENT PRIMARY KEY,
uid INT NOT NULL, 
inquire_id INT NOT NULL,
level TINYINT NOT NULL DEFAULT 0,
reply_type BOOLEAN NOT NULL COMMENT '답변 or 추가 문의',
content TEXT NOT NULL,
created DATETIME DEFAULT CURRENT_TIMESTAMP,
updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
FOREIGN KEY (uid) REFERENCES users(id) ON DELETE CASCADE,
FOREIGN KEY (inquire_id) REFERENCES Inquires(id) ON DELETE CASCADE
)engine=InnoDB default charset utf8;

CREATE TABLE diet_presets(
id INT AUTO_INCREMENT PRIMARY KEY,
uid INT NOT NULL, 
name VARCHAR(40) NOT NULL,
foods json NOT NULL,
created DATETIME DEFAULT CURRENT_TIMESTAMP,
updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
FOREIGN KEY (uid) REFERENCES users(id) ON DELETE CASCADE
)engine=InnoDB default charset utf8;

CREATE TABLE diets(
id INT AUTO_INCREMENT PRIMARY KEY,
uid INT NOT NULL, 
name VARCHAR(40) NOT NULL,
time VARCHAR(40) NOT NULL,
type int NOT NULL , 
foods json NOT NULL,
created DATETIME DEFAULT CURRENT_TIMESTAMP,
updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
FOREIGN KEY (uid) REFERENCES users(id) ON DELETE CASCADE
)engine=InnoDB default charset utf8;

CREATE TABLE images(
id INT AUTO_INCREMENT PRIMARY KEY,
uid INT NOT NULL, 
url VARCHAR(255) NOT NULL,
thumbnail_url VARCHAR(255) NOT NULL,
diet_id INT,
level TINYINT NOT NULL DEFAULT 0,
created DATETIME DEFAULT CURRENT_TIMESTAMP,
updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
FOREIGN KEY (uid) REFERENCES users(id),
FOREIGN KEY (diet_id) REFERENCES diets(id) 
)engine=InnoDB default charset utf8;

CREATE TABLE emotions(
id INT AUTO_INCREMENT PRIMARY KEY,
uid INT NOT NULL, 
emotion VARCHAR(40) NOT NULL,
state VARCHAR(255) NOT NULL,
created DATETIME DEFAULT CURRENT_TIMESTAMP,
updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
FOREIGN KEY (uid) REFERENCES users(id) ON DELETE CASCADE
)engine=InnoDB default charset utf8;